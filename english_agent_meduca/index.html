<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MEDUCA English Planner (PWA) – Primaria</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0A7AFE" />
  <style>
    :root{--bg:#0a0a0a;--card:#121212;--accent:#0A7AFE;--text:#f0f0f0;--muted:#bdbdbd}
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; background:#0b0b0b; color:var(--text); margin:0;}
    header{padding:18px 20px; background:linear-gradient(90deg,#0A7AFE,#4E9FFF);}
    header h1{margin:0; font-size:1.2rem}
    header p{margin:6px 0 0; font-size:0.9rem}
    main{padding:16px}
    .card{background:var(--card); border-radius:12px; padding:16px; max-width:980px; margin:0 auto 16px; box-shadow:0 2px 10px #0006}
    label{display:block; margin:8px 0 4px; font-weight:600}
    input, select, textarea{width:100%; padding:10px; border-radius:8px; border:1px solid #333; background:#1a1a1a; color:#fff}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px}
    .btn{background:var(--accent); color:white; border:none; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer}
    .btn.secondary{background:#1f2937}
    .actions{display:flex; gap:8px; flex-wrap:wrap}
    .preview{white-space:pre-wrap; background:#0f1115; color:#e6edf3; padding:12px; border-radius:10px; overflow:auto; max-height:48vh}
    footer{padding:16px; text-align:center; color:var(--muted)}
    small.muted{color:var(--muted)}
    .note{font-size:0.92rem; color:#d1d5db}
    .badge{display:inline-block; background:#0A7AFE20; color:#e6edf3; padding:4px 8px; border-radius:8px; margin-right:6px}
  </style>
</head>
<body>
  <header>
    <h1>Agente Educativo de Inglés – MEDUCA (PWA offline)</h1>
    <p>Genera planeamientos alineados al Currículo de Inglés 2025 (Primaria). 8 Scenarios × 2 Themes × 5 Lessons (Listening→Speaking→Reading→Writing→Mediation).</p>
  </header>

  <main>
    <section class="card">
      <span class="badge">Paso 1</span> Completa los datos.<br>
      <span class="badge">Paso 2</span> Pulsa <strong>Generar</strong> para ver la vista previa.<br>
      <span class="badge">Paso 3</span> Usa <strong>Copiar</strong>, <strong>Descargar .md</strong>, <strong>Word</strong> o <strong>PDF</strong> según necesites.
      <p class="note">El vocabulario específico se carga desde <code>vocab_map.json</code>. Si no existe la combinación, se usa vocabulario genérico.</p>
    </section>

    <section class="card">
      <div class="grid">
        <div>
          <label>School</label>
          <input id="school" placeholder="CEBG Barrigón" />
        </div>
        <div>
          <label>Teacher</label>
          <input id="teacher" placeholder="José White" />
        </div>
        <div>
          <label>Grade (1–6)</label>
          <input id="grade" type="number" min="1" max="6" placeholder="3" />
        </div>
        <div>
          <label>School year</label>
          <input id="year" placeholder="2026" />
        </div>
        <div>
          <label>Term</label>
          <input id="term" placeholder="Trimester 1" />
        </div>
        <div>
          <label>Level</label>
          <select id="level">
            <option value="Básico">Básico</option>
            <option value="Estándar" selected>Estándar</option>
            <option value="Enriquecido">Enriquecido</option>
          </select>
        </div>
      </div>

      <div class="grid" style="margin-top:8px">
        <div>
          <label>Scenario</label>
          <select id="scenario"></select>
        </div>
        <div>
          <label>Theme</label>
          <select id="theme"></select>
        </div>
      </div>

      <label style="margin-top:12px">Context</label>
      <textarea id="context" rows="3" placeholder="Grupo de primaria en contexto panameño; recursos básicos; enfoque comunicativo y proyectos."></textarea>

      <div class="actions" style="margin-top:12px">
        <button class="btn" id="generate">Generar</button>
        <button class="btn secondary" id="copyBtn">Copiar Markdown</button>
        <button class="btn secondary" id="downloadBtn">Descargar .md</button>
        <button class="btn secondary" id="docBtn">Exportar a Word (.doc)</button>
        <button class="btn secondary" id="pdfBtn">Exportar a PDF</button>
      </div>
    </section>

    <section class="card">
      <h3>Vista previa (Markdown)</h3>
      <div id="preview" class="preview"></div>
      <small class="muted">Consejo: al descargar el .md puedes subirlo a tu repo o convertirlo a Word/PDF.</small>
    </section>

    <section class="card">
      <h3>Ayuda rápida</h3>
      <ul>
        <li>Orden fijo de habilidades: 1–Listening, 2–Speaking, 3–Reading, 4–Writing, 5–Mediation.</li>
        <li>Proyecto final integra competencias del siglo XXI (colaboración, creatividad, pensamiento crítico, comunicación).</li>
        <li>Evaluación: listas de cotejo, rúbricas simples y observación guiada.</li>
      </ul>
      <small class="muted">Basado en el Currículo de Inglés 2025 (Guías de Aprendizaje MEDUCA – Scope & Sequence / Standards).</small>
    </section>
  </main>

  <footer>
    <small class="muted">PWA para docentes de Panamá – MEDUCA Inglés Primaria | Offline con Service Worker.</small>
  </footer>

  <script src="app.js"></script>
  <script src="md2doc.js"></script>
  <script src="md2pdf.js"></script>
</body>
</html>